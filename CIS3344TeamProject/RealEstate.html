<!DOCTYPE html>
<html>
<head>
    <title>Real Estate</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="lab5_style.css" rel="stylesheet" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

</head>

<body>

    <div id="nav">
        <div class="nav">
            <a href="http://cis-iis2.temple.edu/Spring2018/CIS3344_tuc44742/">Home Page</a>
            <a href="RealEstate.html">Real Estate</a>
        </div>
    </div>

    <h1>Real Estate</h1>



    <input id="btnAdd" type="button" value="Add" />

    <input id="btnSearch" type="button" value="Search" />

    <div class="display"></div>

<!--    <center>
        <table>
        <tr>
            <td>Price: </td>
            <td><input id="txtMaxPrice" type="text" /></td>
        </tr>
        <tr>
        <tr>
            <td colspan="2">
                <input id="btnSearchByPrice" value="Search By Price" type="button" />
            </td>
        </tr>
    </table>
</center-->

    <br /><br /><br />


    <script>
        $(document).ready(function () {

            $("#btnAdd").click(function () {

                // Clear the divs contents.
                $(".display").html("");

                $(".display").html("Street Address: " + "<input id='txtStreet' type='text' />" + "<br /><br />" +
                    "City: " + "<input id='txtCity' type='text' />" + "<br /><br />" +
                    "State: " + "<input id='txtState' type='text' />" + "<br /><br />" +
                    "Zip Code: " + "<input id='txtZip' type='text' />" + "<br /><br />" +

                    "Description: " + "<textarea id='txtDescription' cols='30' rows='3'></textarea>" + "<br /><br />" +
                    "Number of bed: " + "<input id='txtBed' type='text' />" + "<br /><br />" +
                    "Number of bath: " + "<input id='txtBath' type='text' />" + "<br /><br />" +
                    "Price: " + "<input id='txtPrice' type='text' />" + "<br /><br />" +
                    "Sq ft  : " + "<input id='txtSize' type='text' />" + "<br /><br />" +
                    "Status: " + "<select id='Select1'>" + "<option>Active</option><option>Processing</option>" +
                    "</select>" + "<br /><br />" +

                    "Image URL: " + "<input id='txtURL' type='text' />" + "<br /><br />" +

                    "<input id='btnSubmit' type='submit' value='Submit' />" 




                    );
            });

            $("#btnSearch").click(function () {

                // Clear the divs contents.
                $(".display").html("");

                $(".display").html("Maximum Price: $" + "<input id='txtMaxPrice' type='text' />" + "<br /><br />" +
               
                    "<input id='btnSearchByPrice' type='button' value='Search' />" + "<hr>" +
                    
                    "Bed: #" + "<input id='txtNumBed' type='text' />" +"       Bath: # " + "<input id='txtNumBath' type='text' />" + "<br /><br />"+

                    "<input id='btnSearchByBedAndBath' type='button' value='Search' />"





                    );
            });


            $("#btnSearchByPrice").click(function () {
                var strURL = "homeSvc.asmx/GetHomeByMaxPrice";    // URL of the Web Service followed by the name of the Web Method.

                // Clear the divs contents.
                $(".display").html("");

                alert("here");
                var maxPrice = parseFloat($("#txtMaxPrice").val()).toFixed(2);
            


                var inputParametersObject = new Object();
                inputParametersObject.price = maxPrice;           // the property 'price' is the name or the parameter expected by the Web Method.

                var strInput = JSON.stringify(inputParametersObject);
                //var strInput = JSON.stringify({theTeam:team}); //alternative method - doesn't require creating the object to store the parameter.

                // Make an AJAX request to get a team and display the response in the appropriate div.
                $.ajax({
                    type: "POST",
                    url: strURL,
                    contentType: "application/json; charset=utf-8", // set the data type sent to the Web Service.
                    dataType: "json",                               // set the data type expected from the Web Service.                               
                    data: strInput,                                 // send an empty JSON object (no input required).    
                    success: function (data) {
                     //  alert("data = " + maxPrice);
                        
                        // set callback function used to update the page/                  
                        var homes = data.d;
                        $.each(homes, function (index, home) {
                            $(".display").append("<p>".concat("MLS#: ", home.mls,
                                                              "<br>Address: ", home.address, "<br>", home.city, ", ", home.state, " ", home.zipcode,
                                                              "<br>Bed: ", home.bed, "  Bath: ", home.bath, "  Size: ", home.size, " sqft",
                                                              "<br>Price: $ ", home.price,
                                                              "<br>Status: ", home.status,
                                                              "<br>Description: ", home.description,
                                                              "<br>Image: <a href='",home.url,"'>Link</a>", 
                                                              "</p>"));
                        });
                    },
                    error: function (req, status, error) {          // sets the error callback function used when an error occurs.
                        alert("Error: " + req.responseText + " | " + status + " | " + error);
                    }
                }); //end of ajax method
            }); // end of btn click event


           


        });
    </script>


</body>
</html>
